(function(t){function n(n){for(var o,l,c=n[0],s=n[1],r=n[2],d=0,p=[];d<c.length;d++)l=c[d],Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&p.push(i[l][0]),i[l]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);u&&u(n);while(p.length)p.shift()();return a.push.apply(a,r||[]),e()}function e(){for(var t,n=0;n<a.length;n++){for(var e=a[n],o=!0,c=1;c<e.length;c++){var s=e[c];0!==i[s]&&(o=!1)}o&&(a.splice(n--,1),t=l(l.s=e[0]))}return t}var o={},i={app:0},a=[];function l(n){if(o[n])return o[n].exports;var e=o[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,l),e.l=!0,e.exports}l.m=t,l.c=o,l.d=function(t,n,e){l.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,n){if(1&n&&(t=l(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(l.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)l.d(e,o,function(n){return t[n]}.bind(null,o));return e},l.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(n,"a",n),n},l.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},l.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=n,c=c.slice();for(var r=0;r<c.length;r++)n(c[r]);var u=s;a.push([0,"chunk-vendors"]),e()})({0:function(t,n,e){t.exports=e("56d7")},"034f":function(t,n,e){"use strict";var o=e("64a9"),i=e.n(o);i.a},1391:function(t,n,e){"use strict";var o=e("a526"),i=e.n(o);i.a},"4c46":function(t,n,e){"use strict";var o=e("9ce8"),i=e.n(o);i.a},"56d7":function(t,n,e){"use strict";e.r(n);e("cadf"),e("551c"),e("f751"),e("097d");var o,i,a=e("2b0e"),l=e("5c96"),c=e.n(l),s=(e("0fae"),e("7f7f"),function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("article",{staticClass:"condition-wrap"},[t._l(t.conditions,(function(n,o){return e("1"===n.type?"ConditionLine":"ConditionGroup",{key:n.id,ref:"condition",refInFor:!0,tag:"component",attrs:{quotaList:t.quotaList},on:{conditionChange:t.conditionChange,addedConditionChange:t.addedConditionChange,delCondition:function(n){return t.delItem(o)},delGroup:function(n){return t.delItem(o)}}})})),e("div",{staticClass:"operate-wrap"},[e("el-select",{staticClass:"relation-select",model:{value:t.connectRelation,callback:function(n){t.connectRelation=n},expression:"connectRelation"}},t._l(t.relationList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.addItem("2")}}},[t._v("增加条件块")]),e("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.addItem("1")}}},[t._v("增加条件")])],1)],2)}),r=[],u=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"condition-line-wrap"},[e("div",{staticClass:"condition-set-wrap"},[e("el-cascader",{staticClass:"data-select",attrs:{placeholder:"请选择",options:t.quotaList,clearable:"",filterable:""},on:{change:t.conditionChange},model:{value:t.conditionData.quota,callback:function(n){t.$set(t.conditionData,"quota",n)},expression:"conditionData.quota"}}),t._l(t.conditionData.addQuotaArr,(function(n,o){return e("el-cascader",{key:o,staticClass:"data-select",attrs:{placeholder:"请选择",options:n.options,clearable:"",filterable:""},on:{change:function(e){return t.addedConditionChange(n.quotaValue,o)}},model:{value:n.quotaValue,callback:function(e){t.$set(n,"quotaValue",e)},expression:"quota.quotaValue"}})})),e("el-select",{staticClass:"condition-select",attrs:{placeholder:"请选择",clearable:""},model:{value:t.conditionData.condition1,callback:function(n){t.$set(t.conditionData,"condition1",n)},expression:"conditionData.condition1"}},t._l(t.conditionList1,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("div",{directives:[{name:"show",rawName:"v-show",value:"1"===t.conditionData.condition1,expression:"conditionData.condition1 === '1'"}],staticClass:"slice-wrap"},[e("div",{staticClass:"slice-info-wrap"},[e("span",{staticClass:"slice-label"},[t._v("从第")]),e("el-input",{staticClass:"slice-input",attrs:{placeholder:""},model:{value:t.conditionData.startIndex,callback:function(n){t.$set(t.conditionData,"startIndex",n)},expression:"conditionData.startIndex"}}),e("span",{staticClass:"slice-label"},[t._v("位取")]),e("el-input",{staticClass:"slice-input",attrs:{placeholder:""},model:{value:t.conditionData.sliceLength,callback:function(n){t.$set(t.conditionData,"sliceLength",n)},expression:"conditionData.sliceLength"}}),e("span",{staticClass:"slice-label"},[t._v("位")])],1),e("el-select",{staticClass:"condition-select",attrs:{placeholder:"请选择",clearable:""},model:{value:t.conditionData.condition2,callback:function(n){t.$set(t.conditionData,"condition2",n)},expression:"conditionData.condition2"}},t._l(t.conditionList2,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"9"===t.conditionData.condition1||"9"===t.conditionData.condition2,expression:"\n        conditionData.condition1 === '9' || conditionData.condition2 === '9'\n      "}],staticClass:"region-wrap"},[e("el-input",{staticClass:"region-value-input",attrs:{placeholder:"请输入"},model:{value:t.conditionData.startValue,callback:function(n){t.$set(t.conditionData,"startValue",n)},expression:"conditionData.startValue"}}),e("span",{staticClass:"region-label"},[t._v("--")]),e("el-input",{staticClass:"region-value-input",attrs:{placeholder:"请输入"},model:{value:t.conditionData.endValue,callback:function(n){t.$set(t.conditionData,"endValue",n)},expression:"conditionData.endValue"}})],1),e("el-input",{directives:[{name:"show",rawName:"v-show",value:"9"!==t.conditionData.condition1&&"9"!==t.conditionData.condition2&&!t.conditionData.compareOptions.length,expression:"\n        conditionData.condition1 !== '9' &&\n        conditionData.condition2 !== '9' &&\n        !conditionData.compareOptions.length\n      "}],staticClass:"compare-value-input",attrs:{placeholder:"请输入"},model:{value:t.conditionData.compareValue,callback:function(n){t.$set(t.conditionData,"compareValue",n)},expression:"conditionData.compareValue"}}),e("el-cascader",{directives:[{name:"show",rawName:"v-show",value:"9"!==t.conditionData.condition1&&"9"!==t.conditionData.condition2&&t.conditionData.compareOptions.length,expression:"\n        conditionData.condition1 !== '9' &&\n        conditionData.condition2 !== '9' &&\n        conditionData.compareOptions.length\n      "}],staticClass:"data-select compare-select",attrs:{placeholder:"请选择",options:t.conditionData.compareOptions,props:t.compareCascaderProps,"show-all-levels":t.compareCascaderProps.showAllLevels,"collapse-tags":"",clearable:"",filterable:!t.compareCascaderProps.multiple},model:{value:t.conditionData.compareSelectValue,callback:function(n){t.$set(t.conditionData,"compareSelectValue",n)},expression:"conditionData.compareSelectValue"}})],2),e("i",{directives:[{name:"show",rawName:"v-show",value:t.canDelete,expression:"canDelete"}],staticClass:"icon el-icon-close",attrs:{title:"删除"},on:{click:t.delCondition}})])},d=[],p=[{label:"截取",value:"1"},{label:"长度",value:"2"},{label:"等于",value:"3"},{label:"不等于",value:"4"},{label:"大于",value:"5"},{label:"大于等于",value:"6"},{label:"小于",value:"7"},{label:"小于等于",value:"8"},{label:"区间",value:"9"},{label:"包含",value:"10"},{label:"不包含",value:"11"},{label:"前缀",value:"12"},{label:"后缀",value:"13"},{label:"非前缀",value:"14"},{label:"非后缀",value:"15"},{label:"为空",value:"16"},{label:"不为空",value:"17"}],h={name:"condition-line",data:function(){return{conditionList1:p,conditionList2:p.slice(2),compareCascaderProps:{showAllLevels:!0,multiple:!0,checkStrictly:!1,emitPath:!0,expandTrigger:"click"},conditionData:{quota:"",addQuotaArr:[],condition1:"",condition2:"",startIndex:"",sliceLength:"",startValue:"",endValue:"",compareValue:"",compareSelectValue:[],compareOptions:[]}}},props:{canDelete:{type:Boolean,default:!0},quotaList:{type:Array,default:function(){return[]}}},methods:{delCondition:function(){this.$emit("delCondition")},conditionChange:function(t){var n=this;this.$set(this.conditionData,"addQuotaArr",[]),this.initCompareValue(),this.$nextTick().then((function(){n.$emit("conditionChange",{context:n,value:t})}))},addedConditionChange:function(t,n){var e=this,o=this.conditionData.addQuotaArr.slice(0,n+1);this.$set(this.conditionData,"addQuotaArr",o),this.initCompareValue(),this.$nextTick().then((function(){e.$emit("conditionChange",{context:e,value:t})}))},addQuotaColumn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.conditionData.addQuotaArr.push({quotaValue:"",options:t})},setCompareOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$set(this.conditionData,"compareOptions",t);var e=Object.assign({},this.compareCascaderProps,n);console.log("props",e),this.$set(this,"compareCascaderProps",e)},initCompareValue:function(){this.$set(this.conditionData,"compareValue",""),this.$set(this.conditionData,"compareOptions",[])},getCondition:function(){return this.conditionData},setCondition:function(t){t.compareOptions=t.compareOptions||[],this.$set(this,"conditionData",t)}}},f=h,v=(e("1391"),e("2877")),m=Object(v["a"])(f,u,d,!1,null,"de618244",null),b=m.exports,C=e("3835"),g=(e("ac6a"),e("ffc1"),e("c5f6"),e("6b54"),{data:function(){return{relationList:[{label:"并且",value:"and"},{label:"或者",value:"or"}]}},props:{quotaList:{type:Array,default:function(){return[{label:"指标一",value:"1"},{label:"指标二",value:"2"}]}}},methods:{uid:function(){return Number(Math.random().toString().substr(3,3)+Date.now()).toString(36)}}}),y={name:"condition-group",mixins:[g],components:{ConditionLine:b},data:function(){return{connectRelation:"and",conditions:[{id:this.uid(),type:"1"}]}},methods:{delGroupItem:function(t,n){t.splice(n,1)},addGroupItem:function(t,n){var e={id:this.uid(),type:n};"2"===n&&(e.connectRelation="and",e.conditions=[{id:this.uid(),type:"1"}]),t.push(e)},delGroup:function(){this.$emit("delGroup")},relationOptions:function(){var t=this.$createElement;return this.relationList.map((function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))},conditionChange:function(t){this.$emit("conditionChange",t)},addedConditionChange:function(t){this.$emit("addedConditionChange",t)},getCondition:function(){var t=this,n=function n(e){var o=[];return e.map((function(e){var i={};"1"===e.type?i=t.$refs[e.id].getCondition():(i.connectRelation=e.connectRelation,i.conditions=n(e.conditions)),o.push(i)})),o},e=n(this.conditions);return{connectRelation:this.connectRelation,conditions:e}},setCondition:function(t){var n=this;this.$set(this,"connectRelation",t.connectRelation);var e={},o=function t(o){var i=o.map((function(o){var i=n.uid(),a={id:i,type:o.connectRelation?"2":"1"};return o.connectRelation?(a.connectRelation=o.connectRelation,a.conditions=t(o.conditions)):e[i]=o,a}));return i},i=o(t.conditions);this.$set(this,"conditions",i),this.$nextTick().then((function(){for(var t=0,o=Object.entries(n.$refs);t<o.length;t++){var i=Object(C["a"])(o[t],2),a=i[0],l=i[1];if(l){var c=e[a];l.setCondition(c)}}}))}},render:function(){var t=this,n=arguments[0],e=function e(o,i){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=o[i];return"1"===l.type?n(b,{key:l.id,attrs:{quotaList:t.quotaList},ref:l.id,on:{delCondition:function(){t.delGroupItem(o,i)},conditionChange:function(n){return t.conditionChange(n)},addedConditionChange:function(n){return t.addedConditionChange(n)}}}):n("article",{class:a?"condition-group-wrap has-bg-color":"condition-group-wrap"},[l.conditions&&l.conditions.map((function(t,n){return e(l.conditions,n,!a)})),n("div",{class:"operate-wrap"},[n("el-select",{class:"relation-select",model:{value:l.connectRelation,callback:function(n){t.$set(l,"connectRelation",n)}}},[t.relationOptions()]),n("el-button",{attrs:{type:"primary"},on:{click:function(){t.addGroupItem(l.conditions,"2")}}},["增加条件块"]),n("el-button",{attrs:{type:"primary"},on:{click:function(){t.addGroupItem(l.conditions,"1")}}},["增加条件"]),n("el-button",{attrs:{type:"primary"},on:{click:function(){t.delGroupItem(o,i)}}},["删除条件块"])])])},o=this.conditions.map((function(o,i){if("1"===o.type)return n(b,{key:o.id,attrs:{quotaList:t.quotaList},ref:o.id,on:{delCondition:function(){t.delGroupItem(t.conditions,i)},conditionChange:function(n){return t.conditionChange(n)},addedConditionChange:function(n){return t.addedConditionChange(n)}}});var a=e(t.conditions,i);return a}));return n("article",{class:"condition-group-wrap has-bg-color"},[o,n("div",{class:"operate-wrap"},[n("el-select",{class:"relation-select",model:{value:t.connectRelation,callback:function(n){t.connectRelation=n}}},[this.relationOptions()]),n("el-button",{attrs:{type:"primary"},on:{click:function(){t.addGroupItem(t.conditions,"2")}}},["增加条件块"]),n("el-button",{attrs:{type:"primary"},on:{click:function(){t.addGroupItem(t.conditions,"1")}}},["增加条件"]),n("el-button",{attrs:{type:"primary"},on:{click:this.delGroup}},["删除条件块"])])])}},D=y,V=(e("cfbf"),Object(v["a"])(D,o,i,!1,null,"3790ca7a",null)),x=V.exports,$={name:"custom-query",mixins:[g],components:{ConditionLine:b,ConditionGroup:x},data:function(){return{connectRelation:"and",conditions:[{id:this.uid(),type:"1"}]}},methods:{addItem:function(t){this.conditions.push({id:this.uid(),type:t})},delItem:function(t){this.conditions.splice(t,1)},conditionChange:function(t){this.$emit("conditionChange",t)},addedConditionChange:function(t){this.$emit("addedConditionChange",t)},getCustomQuery:function(){var t=this.$refs.condition.map((function(t){return t.getCondition()}));return{connectRelation:this.connectRelation,conditions:t}},setCustomQuery:function(t){var n=this;this.$set(this,"connectRelation",t.connectRelation);var e=t.conditions.map((function(t){var e=n.uid();return{id:e,type:t.connectRelation?"2":"1"}}));this.$set(this,"conditions",e),this.$nextTick().then((function(){n.$refs.condition.map((function(n,e){var o=t.conditions[e];n.setCondition(o)}))}))}}},w=$,k=(e("4c46"),Object(v["a"])(w,s,r,!1,null,"06396986",null)),O=k.exports,q=function(t,n){t.component(O.name,O)},L=q,R=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[e("p",{staticClass:"btn-line"},[e("el-button",{attrs:{type:"primary"},on:{click:t.setCustomQuery}},[t._v("回显自定义条件")]),e("el-button",{attrs:{type:"primary"},on:{click:t.getCustomQuery}},[t._v("获取自定义条件")])],1),e("div",{staticClass:"query-wrap"},[e("custom-query",{ref:"customQuery",attrs:{quotaList:t.list},on:{conditionChange:t.conditionChange}})],1)])},Q=[],I={name:"app",data:function(){return{list:[{label:"北京",value:"110",children:[{label:"海淀",value:"1"},{label:"石景山",value:"2"}]},{label:"上海",value:"120"},{label:"广州",value:"130"},{label:"深圳",value:"140"}]}},methods:{conditionChange:function(t){console.log("conditionChange",t),"110"===t.value[0]?t.context.addQuotaColumn([{label:"导弹",value:"1"},{label:"飞机",value:"2"},{label:"航母",value:"3"}]):"3"===t.value[0]?t.context.addQuotaColumn([{label:"北大",value:"10"},{label:"清华",value:"11"}]):"11"===t.value[0]&&t.context.setCompareOptions([{label:"晴天",value:"21"},{label:"雨天",value:"22",children:[{label:"白云手动我hi欧舒丹GViOShi噢打工我熬熟的狗年是多行",value:"22-1"},{label:"乌云",value:"22-2"}]}],{multiple:!1})},getCustomQuery:function(){var t=this.$refs.customQuery.getCustomQuery();console.log("getCustomQuery",t)},setCustomQuery:function(){var t={connectRelation:"or",conditions:[{quota:["110","1"],addQuotaArr:[{quotaValue:"3",options:[{label:"晴天",value:"3"},{label:"雨天",value:"4"}]},{quotaValue:"6",options:[{label:"奔驰",value:"5"},{label:"宝马",value:"6"}]}],condition1:"1",condition2:"9",startIndex:"1",sliceLength:"23",startValue:"100",endValue:"200",compareValue:""},{connectRelation:"and",conditions:[{quota:"120",addQuotaArr:[],condition1:"2",condition2:"",startIndex:"",sliceLength:"",startValue:"",endValue:"",compareValue:"20"},{connectRelation:"or",conditions:[{quota:["110","2"],addQuotaArr:[{quotaValue:"4",options:[{label:"晴天",value:"3"},{label:"雨天",value:"4"}]}],condition1:"9",condition2:"",startIndex:"",sliceLength:"",startValue:"200",endValue:"300",compareValue:""},{connectRelation:"and",conditions:[{quota:"130",addQuotaArr:[],condition1:"11",condition2:"",startIndex:"",sliceLength:"",startValue:"",endValue:"",compareValue:"30"}]}]}]},{quota:"130",addQuotaArr:[],condition1:"12",condition2:"",startIndex:"",sliceLength:"",startValue:"",endValue:"",compareValue:"",compareSelectValue:"002",compareOptions:[{label:"选项一",value:"001"},{label:"选项二",value:"002"}]},{connectRelation:"or",conditions:[{quota:"140",addQuotaArr:[],condition1:"5",condition2:"",startIndex:"",sliceLength:"",startValue:"",endValue:"",compareValue:"50"},{quota:"130",addQuotaArr:[],condition1:"16",condition2:"",startIndex:"",sliceLength:"",startValue:"",endValue:"",compareValue:"60"}]}]};this.$refs.customQuery.setCustomQuery(t)}}},_=I,A=(e("034f"),Object(v["a"])(_,R,Q,!1,null,null,null)),j=A.exports;a["default"].config.productionTip=!1,a["default"].use(c.a),a["default"].use(L),new a["default"]({render:function(t){return t(j)}}).$mount("#app")},"64a9":function(t,n,e){},"9ce8":function(t,n,e){},a526:function(t,n,e){},cfbf:function(t,n,e){"use strict";var o=e("e215"),i=e.n(o);i.a},e215:function(t,n,e){}});